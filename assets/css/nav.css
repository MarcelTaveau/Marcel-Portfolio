/* ========================================
   NAVIGATION COMPONENT
   ======================================== */

/* Nav container (pill) centered inside header */
header nav {
    background: var(--glass-bg);
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border-radius: 999px;
    border: 1px solid var(--border-weak);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.18);
    overflow: visible;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;

    max-width: calc(100% - 8rem);
    white-space: nowrap;
}

header nav ul {
    display: flex;
    gap: 0.25rem;
    padding: 0.5rem;
    margin: 0;
    align-items: flex-end;
    list-style: none;
}

/* ========================================
   PILL COMPONENT SYSTEM
   ======================================== */

/* Unified pill component (used by the individual nav links themselves and lang toggle) */
.pill {
    background: var(--glass-bg);
    /* default pill has glass background */
    backdrop-filter: blur(20px) saturate(160%);
    -webkit-backdrop-filter: blur(20px) saturate(160%);
    border-radius: 999px;
    border: 1px solid var(--border-weak);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.45rem 0.9rem;
    color: var(--link-color);
    font-weight: 600;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: background 180ms ease, color 180ms ease, transform 120ms ease, box-shadow 160ms ease, border-color 160ms ease;
    --x: 50%;
    --y: 50%;
    --pill-translate: 0;
    /* anchors use 0; toggle will override to -50% */
    transform: translateY(var(--pill-translate));
    will-change: transform, box-shadow;
}

/* Pill aura (blue) - reduced brightness to eliminate white dot artifacts */
.pill::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: radial-gradient(circle at var(--x) var(--y),
            rgba(106, 176, 243, 0.12) 0%,
            rgba(106, 176, 243, 0.06) 25%,
            rgba(106, 176, 243, 0.02) 50%,
            transparent 75%);
    mix-blend-mode: normal;
    filter: blur(16px);
    opacity: 0;
    transition: opacity 220ms ease, background-position 220ms ease;
}

/* Pill interactions */
.pill.is-hovered::before,
.pill:hover::before,
.pill:focus::before {
    opacity: 1;
}

.pill:hover,
.pill.is-hovered,
.pill:focus {
    transform: translateY(calc(var(--pill-translate) - 2px));
    background: rgba(255, 255, 255, 0.03);
    color: #aee6ff;
}

.pill:active {
    transform: translateY(calc(var(--pill-translate) - 1px));
}

.pill:focus-visible,
.pill:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.16);
    box-shadow:
        0 8px 30px rgba(106, 176, 243, 0.08),
        0 0 0 4px rgba(106, 176, 243, 0.06);
    background: rgba(255, 255, 255, 0.03);
    color: #aee6ff;
}

/* Button toggle is a pill. Used for lang toggle and hamburger menu design */
.button-toggle {
    --pill-translate: -50%;
    position: absolute;
    right: 1.25rem;
    top: 50%;
    z-index: 3;
    box-shadow: 0 1.5px 0 rgba(255, 255, 255, 0.06) inset;
    -webkit-tap-highlight-color: transparent;
}

/* ========================================
   NAV-SPECIFIC PILL OVERRIDES
   ======================================== */

/* Nav anchors inside the pill container - override to be transparent */
header nav a.pill {
    display: inline-flex;
    --pill-translate: 0;
    border: none;
    background: transparent;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
}

header nav a.pill:hover,
header nav a.pill.is-hovered,
header nav a.pill:focus {
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.03);
    color: #aee6ff;
    border: none;
    /* ensure no border appears on hover */
}

header nav a.pill:active {
    transform: translateY(-1px);
}

header nav a.pill:focus-visible,
header nav a.pill:focus {
    outline: none;
    border: none;
    /* no border on focus for nav anchors */
    box-shadow: 0 0 0 2px rgba(106, 176, 243, 0.06);
    /* subtle focus ring instead */
    background: rgba(255, 255, 255, 0.03);
    color: #aee6ff;
}

/* Hide hamburger menu when not needed */
#nav-toggle {
    display: none;
}

/* ========================================
   RESPONSIVE DESIGN
   ======================================== */
@media (max-width: 850px) {
    /* ===== HAMBURGER BUTTON STYLES ===== */

    /* show hamburger menu */
    #nav-toggle {
        display: inline-flex;
    }

    /* hides nav by default on small screens */
    header nav {
        display: none;
    }

    /* hamburger icon lines */
    .button-toggle .hamburger {
        display: inline-flex;
        flex-direction: column;
        gap: 4px;
        width: 18px;
    }

    /* hamburger icon lines fade to x and vice versa */
    .button-toggle .hamburger span {
        display: block;
        height: 2px;
        background: currentColor;
        border-radius: 2px;
        transition: transform 0.3s ease, opacity 0.3s ease;
    }

    /* Animate hamburger to X when menu is open */
    header.nav-open .button-toggle .hamburger span:nth-child(1) {
        transform: translateY(6px) rotate(45deg);
        /* top line rotates down-right */
    }
    header.nav-open .button-toggle .hamburger span:nth-child(2) {
        opacity: 0;
        /* middle line fades out */
    }
    header.nav-open .button-toggle .hamburger span:nth-child(3) {
        transform: translateY(-6px) rotate(-45deg);
        /* bottom line rotates up-right */
    }

    /* Actual nav menu styles */
    header.nav-open nav {
        display: block;
        position: absolute;
        left: 100%;
        top: 100%;
        transform: translate(-115%, 8px);
        width: calc(100% - 2rem);
        max-width: 120px;
        flex-direction: column;
        gap: 0.5rem;
        padding: 0.5rem;
        border-radius: 16px;
        background: var(--glass-bg);
        box-shadow: 0 12px 36px rgba(0, 0, 0, 0.36);
    }

    /* blur and darken background when nav is open */
    body.nav-open::before {
        content: "";
        display: block;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        z-index: 1;
    }

    /* stack nav items vertically in mobile menu */
    header.nav-open nav ul {
        flex-direction: column;
        gap: 0.5rem;
        padding: 0;
    }

    header.nav-open nav ul li {
        margin: 0;
    }

    /* include lang toggle in mobile menu */
    header.nav-open #lang-toggle {
        display: inline-block;
        position: absolute;
        right: 6.75rem;
        top: 50%;
        align-self: center;
    }

    /* hide lang toggle from corner on mobile (unless menu is open) */
    #lang-toggle {
        display: none;
    }

    /* Ensure header appears above the backdrop blur overlay */
    header.nav-open {
        position: relative;
        z-index: 100;
        /* higher than the overlay's z-index */
    }
}